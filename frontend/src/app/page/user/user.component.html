<div *ngIf="list$ | async as list" class="wrapper">
  <!-- Search -->
  <!-- <div class="search bg-light border rounded p-3 m-3">
      <div class="fw-bold text-uppercase text-center pb-3">Szűrés oszlopok szerint</div>
      <div class="search d-flex flex-row">
        <span class="fw-bold text-uppercase col-1 pt-2">Oszlop :</span>
        <select class="form-control border col" [(ngModel)]="filterKey">
          <option *ngFor="let key of filterKeys" [value]="[key[0]]">{{key[1]}}</option>
        </select>
        <input [(ngModel)]="phrase" class="filter-search border rounded col-6 px-3 ms-3" type="text"
          placeholder="Keresés . . .">
      </div>
    </div>-->

  <!-- Add new -->
  <div class="m-3">
    <button [routerLink]="['/', entity, '']" type="button" class="add__new game-played btn fw-bold text-uppercase col-12 col-xl-10 offset-xl-1">
      <fa-icon class="me-1" [icon]="faUserPlus"></fa-icon>
      Register user
    </button>
  </div>

  <!-- Display options -->
  <section class="col-xl-10 offset-xl-1 d-flex flex-row justify-content-between pe-3 my-4">
    <div class="d-flex flex-column flex-md-row ms-3">
      <div class="d-flex flex-row me-md-3">
        <div class="input__icon__wrapper d-flex align-items-center justify-content-end">
          <fa-icon class="text-center" [icon]="faKey"></fa-icon>
        </div>
        <div class="select__wrapper form-group my-0">
          <select #inputRef [(ngModel)]="filterKey" class="form-select custom-select col-12" name="key" required
            (focus)="keyFocusToggler($event)" (blur)="keyFocusToggler($event)">
            <option selected value=""></option>
            <option value="id">Id</option>
            <option value="username">Username</option>
            <option value="email">Email</option>
            <option value="coins">Coins</option>
            <option value="joinDate">Join date</option>
            <option value="lastOnlineDate">Last online</option>
            <option value="role">Role</option>
            <option value="banned">Banned</option>
          </select>
          <label class="form-label w-100 d-flex align-items-end justify-content-end icon-label">
            <fa-icon class="select__icon" [icon]="faSquareCaretDown"></fa-icon>
          </label>
          <label class="form-label" [class]="keyClass">Key</label>
        </div>
      </div>

      <div class="d-flex flex-row me-md-3 mt-3 mt-md-0">
        <div class="input__icon__wrapper d-flex align-items-center justify-content-end">
          <fa-icon class="text-center" [icon]="faFilter"></fa-icon>
        </div>
        <div class="phrase__wrapper form-group m-0">
          <input #inputRef [(ngModel)]="phrase" class="form-control" name="phrase" type="text" (focus)="phraseFocusToggler($event)"
            (blur)="phraseFocusToggler($event)">
          <label class="form-label" [class]="phraseClass">Filter</label>
        </div>
      </div>
    </div>

    <div class="h-min-content d-flex flex-row mt-auto">
      <div class="input__icon__wrapper d-flex align-items-center justify-content-end ms-3">
        <fa-icon class="text-center" [icon]="faBars"></fa-icon>
      </div>
      <div class="rows__wrapper form-group m-0">
        <input #inputRef [(ngModel)]="itemsPerPage" class="form-control pe-0" name="rows" type="number"
          (focus)="rowsFocusToggler($event)" (blur)="rowsFocusToggler($event)">
        <label class="form-label" [class]="rowsClass">Rows</label>
      </div>
    </div>
  </section>

  <!-- List -->
  <div class="table-responsive col-xl-10 offset-xl-1 px-3">
    <table class="table table-sm m-0">
      <caption class="text-center game-played">
        List of users
      </caption>
      <thead>
        <tr>
          <!-- <th *ngFor="let col of columns" scope="col" (click)="onColumnSelect(col.key)">
              <div class="d-flex flex-row"><i class="fa fa-sort mt-1 me-1"></i> {{col.title}}</div>
            </th> -->
          <th>#</th>
          <th>Username</th>
          <th>E-mail</th>
          <th>Joined</th>
          <th>Last online</th>
          <th>Scores</th>
          <th>Coins</th>
          <th>Shop items</th>
          <th>Role</th>
          <th>Banned</th>
          <th></th>
        </tr>
      </thead>
      <tbody>
        <!-- <tr *ngFor="let row of list | filter:phrase:filterKey | sorter:sortColumn:direction | slice:startSlice:endSlice">
            <td *ngFor="let col of columns">
              <span *ngIf="!col.htmlOutput; else elseBlock">
                <span *ngIf="col.key !== 'image'">
                  {{ row[col.key] | xPipe:col.pipes:col.pipeArgs }}
                </span>
                <span *ngIf="col.key === 'image'">
                  <img class="image" [src]="row[col.key]">
                </span>
              </span>
              <ng-template #elseBlock>
                <span [innerHTML]="col.htmlOutput(row[col.key])"></span>

              </ng-template>
            </td>
            <td>
              <button (click)="onSelect(row)" class="m-1 edit__button btn">
                <i class="fa fa-pencil"></i>
              </button>
              <button (click)="onDelete(row)" class="m-1 delete__button btn">
                <i class="fa fa-trash"></i>
              </button>
            </td>
          </tr> -->
        <tr *ngFor="let user of list | filter:phrase:filterKey | paginate: { itemsPerPage: itemsPerPage, currentPage: p }" class="align-middle">
          <td>{{ user.id }}</td>
          <td>{{ user.username }}</td>
          <td>{{ user.email }}</td>
          <td>{{ user.joinDate }}</td>
          <td>{{ user.lastOnlineDate }}</td>
          <td>{{ user.scores }}</td>
          <td>{{ user.coins }}</td>
          <td> <p *ngFor="let index of user.shopItems">{{ index.title }}</p> </td>
          <td>{{ user.role }}</td>
          <td>
            <input [(ngModel)]="user.banned" (change)="checkValue(user.banned ? 'true' : 'false', user.id)"
              type="checkbox" name="" />
          </td>
          <!-- {{ user.banned }} <br> -->
          <td>
            <div class="admin__buttons d-flex flex-row">
              <!-- <fa-icon [icon]="faGavel"></fa-icon> -->
              <!-- <button *ngIf="!user.banned" (click)="onBanOne(user.id)" class="m-1 ban__button btn">
                <fa-icon [icon]="faUserXmark"></fa-icon>
              </button>
              <button *ngIf="user.banned" (click)="onUnbanOne(user.id)" class="m-1 unban__button btn">
                <fa-icon [icon]="faUserCheck"></fa-icon>
              </button> -->
              <button (click)="onEditOne(user)" class="m-1 edit__button btn">
                <fa-icon [icon]="faUserPen"></fa-icon>
              </button>
              <button (click)="onDeleteOne(user.id)" class="m-1 delete__button btn">
                <fa-icon [icon]="faUserMinus"></fa-icon>
                <!-- <fa-icon [icon]="faUserXmark"></fa-icon> -->
              </button>
            </div>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <!-- Pagination -->
  <div class="d-flex justify-content-center mb-5">
    <pagination-controls class="my-pagination" (pageChange)="p=$event" previousLabel="Prev" nextLabel="Next">
    </pagination-controls>
  </div>

</div>
